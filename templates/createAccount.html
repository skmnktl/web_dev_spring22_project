<!DOCTYPE html>
<html>
<head>
	<title>Create Account</title>

	<link rel="stylesheet" type="text/css"
        href="{{ url_for('static', filename='canvasStyle.css')}}" />

</head>
	
	<body onload="loadUserID()">
		<div class="header">
			<h2>Create Account</h2>
			<hr>
		</div>

		<div class="flex-container">
			<div id="createAccountForm">
				<form action="http://uchicago.edu" method="GET">
					<h3>User Information</h3>
					<label for="firstName"><b>First Name:</b></label>
					<input type="text" id="firstName" name="firstName"><br>

					<label for="lastName"><b>Last Name:</b></label>
					<input type="text" id="lastName" name="lastName"><br>

					<label for="email"><b>Email:</b></label>
					<input type="text" id="email" name="email"><br>

					<label for="accountID"><b>Account ID:</b></label>
					<input type="text" id="accountID" name="accountID"><br><br>

					<label for="password"><b>Password:</b></label>
					<input type="text" id="password" name="password"><br>

					<label for="confirmPassword"><b>Confirm Password:</b></label>
					<input type="text" id="confirmPassword" name="confirmPassword"><br><br>


					<label for="accountType"><b>Account Type:</b></label><br>
					<input id= "accountTypeStudent" type="radio" name="accountType">
					<label for="accountTypeStudent"><b>Student</b></label><br>
					<input id="accountTypeTeacher" type="radio" name="accountType">
					<label for="accountTypeTeacher"><b>Teacher</b></label><br>


					<h3>Security Questions</h3>
					<p>What is your mother's maiden name?</p>
					<label for="securityAnswer1"><b>Your Answer:</b></label>
					<input type="text" id="securityAnswer1" name="securityAnswer1"><br>

					<p>What was the make and model of the first car you purchased?</p>
					<label for="securityAnswer2"><b>Your Answer:</b></label>
					<input type="text" id="securityAnswer2" name="securityAnswer2"><br>

					<p>What is the name of the street you grew up on?</p>
					<label for="securityAnswer3"><b>Your Answer:</b></label>
					<input type="text" id="securityAnswer3" name="securityAnswer3"><br>

					<br><button type="button" onclick="createAccount()">Validate Entries</button><br><br>

					 <input id="submitButton" type="submit" style="display:none" value="Create Account">


				</form>
			</div>

				
			<div id="newAccountLink">

			</div>
		</div>

		<script>

			function loadUserID() {
				var userID = sessionStorage.getItem("userID")
				console.log(userID)
			}
			
			function createAccount() {
				var passwordInput = document.getElementById("password").value;
				var passwordConfirm = document.getElementById("confirmPassword").value;

				var emailInput = document.getElementById("email").value;
				var idInput = document.getElementById("accountID").value;

				var submitButton = document.getElementById("submitButton").value;

				if (passwordValidate(passwordInput, passwordConfirm) &&
					emailValidate(emailInput) &&
					idValidate(idInput)
				) {
					submitButton.style.display="block"
				} else {
					console.log("FALSE")
				}
			}
				

			function passwordValidate(passwordInput, passwordConfirm) {


				var validated = true;
				var letter = /^[a-zA-Z]+$/;

				if (
					passwordInput.length < 5 ||
					numSymCount(passwordInput) === false ||
					passwordInput !== passwordConfirm
					) {validated = false}

				if (validated) {
					return true
				} else {
					return false
				}
			}

			function numSymCount(str) {
				var numberList = /^[0-9]+$/;
				var symbolList = /^[_!@#$%^&]+$/;
				var numCount = 0
				var symCount = 0

				for (let i = 0; i < str.length; i++) {
				    if (str.charAt(i).match(numberList)) {numCount++}
				    if (str.charAt(i).match(symbolList)) {symCount++}	
			    }
			    if (
			    	numCount < 1 ||
			    	symCount < 1 
		    	) {
			    	return false 
				  } else {return true}
			}

			function emailValidate(str) {
				var ampCount = 0
				var dotCount = 0

				for (let i = 0; i < str.length; i++) {
				    if (str.charAt(i) === '@') {ampCount++}
				    if (str.charAt(i) === '.') {dotCount++}
			    }
			    if (
			    	dotCount !== 1 ||
			    	ampCount !== 1 
		    	) {
			    	return false 
				  } else {return true}
			}

			function idValidate(str) {
				var notNumList = /^[_!@#$%^&a-zA-Z]+$/;

				for (let i = 0; i < str.length; i++) {
				    if (str.charAt(i).match(notNumList)) {return false}
			    }
				return true
			}

		</script>

	</body>
</html>